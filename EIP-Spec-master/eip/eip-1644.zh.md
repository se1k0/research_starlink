---

eip: ERC-1644
title: 控制者代币操作标准（ERC-1400 安全代币标准的一部分）
author: Adam Dossa (@adamdossa), Pablo Ruiz (@pabloruiz55), Fabian Vogelsteller (@frozeman), Stephane Gosselin (@thegostep)
discussions-to: #1411
status: Draft
type: Standards Track
category: ERC
created: 2018-09-09
require: None

---

## 简单摘要

本标准隶属于与安全代币相关的 ERC-1400（#1411）标准集合。

提供用于控制者操作（即强制转账）的标准接口。

## 摘要

允许代币透明地声明控制者是否可以在地址之间单方面转移代币。

## 动机

通过为所有相关方提供一组标准接口来加速在以太坊区块链上发行与管理证券，从而对安全代币进行操作与查询。

由于安全代币受监管与法律监督（具体取决于司法辖区、监管框架与标的资产），在许多情况下发行方（或由发行方委托、作为控制者的实体，例如监管机构或过户代理）需要保留在地址之间强制转移代币的能力。

这些控制者转账应当透明（发出标记为强制转账的事件），且代币合约本身应明确是否允许此类操作。

示例情形包括：撤销欺诈交易、解决私钥丢失以及响应法院命令。

## 要求

有关整个标准库的完整需求，请参阅 ERC-1400（#1411）。

以下需求是在与安全代币生态系统参与者讨论后汇编而成：

- 必须能够为法律行动或资金找回执行强制转账。

## 设计原理（Rationale）

鉴于此类功能与以太坊去中心化特性之间的冲突，使此类操作以及执行这些交易的能力尽可能透明，能够让不同的用例遵循该标准。

## 设计原理（Rationale）

代表证券所有权的代币可能需要被授权的操作员对代币拥有额外控制。

这包括增加供给的能力，以及强制转移代币的能力。该标准允许管理这些控制，并确保其透明性。如果发行方需要增加代币供给或进行控制者转账（强制转账），则可透明评估这些权利，而不是以定制或隐蔽方式实现。

## 规范

在某些司法辖区，发行方（或其委托的实体）可能需要保留强制转移代币的能力。这可能用于处理法律纠纷或法院命令，或用于补救投资者丧失私钥的情况。

#### controllerTransfer

该函数允许授权地址在任意两个代币持有人之间转移代币。转移仍必须遵守代币持有人的余额（因此转移数量必须至多为 `balanceOf(_from)`），并且可能需要遵守其他转移限制。

`controllerTransfer` 必须发出 `ControllerTransfer` 事件。

``` solidity
function controllerTransfer(address _from, address _to, uint256 _value, bytes _data, bytes _operatorData) external;
```

#### controllerRedeem

该函数允许授权地址为任意代币持有人赎回代币。赎回仍必须遵守代币持有人的余额（因此赎回数量必须至多为 `balanceOf(_tokenHolder)`），并且可能需要遵守其他转移限制。

`controllerRedeem` 必须发出 `ControllerRedemption` 事件。

``` solidity
function controllerRedeem(address _tokenHolder, uint256 _value, bytes _data, bytes _operatorData) external;
```

#### isControllable

为提供 `controllerTransfer`/`controllerRedeem` 是否可用的透明性，可使用 `isControllable` 函数。

如果一个代币的 `isControllable()` 返回 FALSE，则它必须：
  - 未来始终返回 FALSE；
  - `controllerTransfer` 必须回退（revert）；
  - `controllerRedeem` 必须回退（revert）。

换言之，如果发行方将 `isControllable` 设置为返回 FALSE，则该代币合约不会再发生任何控制者交易。

``` solidity
function isControllable() external view returns (bool);
```

## 接口

``` solidity
/// @title IERC1644 控制者代币操作（ERC1400 安全代币标准的一部分）
/// @dev 参见 https://github.com/SecurityTokenStandard/EIP-Spec

interface IERC1644 is IERC20 {

    // 控制者操作
    function isControllable() external view returns (bool);
    function controllerTransfer(address _from, address _to, uint256 _value, bytes _data, bytes _operatorData) external;
    function controllerRedeem(address _tokenHolder, uint256 _value, bytes _data, bytes _operatorData) external;

    // 控制者事件
    event ControllerTransfer(
        address _controller,
        address indexed _from,
        address indexed _to,
        uint256 _value,
        bytes _data,
        bytes _operatorData
    );

    event ControllerRedemption(
        address _controller,
        address indexed _tokenHolder,
        uint256 _value,
        bytes _data,
        bytes _operatorData
    );

}
```

## 参考
- [EIP 1400: 带分区的安全代币标准](https://github.com/ethereum/EIPs/issues/1411)
- [EIP 草案](https://github.com/SecurityTokenStandard/EIP-Spec)

